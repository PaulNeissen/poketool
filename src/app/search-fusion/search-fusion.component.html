
<div class="table-container" fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="40px">

  <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="40px">
    <div class="filter mat-elevation-z8">
      <mat-form-field floatLabel="never">
        <input matInput (keyup)="applyFilter($event)" [(ngModel)]="nameFilter" placeholder="Search..." #input>
      </mat-form-field>
    </div>
    <mat-checkbox [(ngModel)]="showLegendary" (change)="applyFilter($event)">Legendary</mat-checkbox>
  </div>

  
  <div class="type-filter" fxLayout="row wrap" fxLayoutAlign="center center" fxLayoutGap="40px">
    <div *ngFor="let type of getTypes(); let i = index">
      <mat-checkbox [(ngModel)]="typeFilter[i]" (change)="applyFilter($event)">
        <img [src]="getTypeSrc(i)">
      </mat-checkbox>
    </div>
  </div>


  <mat-progress-bar mode="indeterminate" *ngIf="!loaded"></mat-progress-bar>

  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="large-column"> NÂ° </th>
      <td mat-cell *matCellDef="let row"> {{ row.id }} </td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="large-column"> Name </th>
      <td mat-cell *matCellDef="let row" class="bold">{{ row.name | titlecase }}</td>
    </ng-container>

    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef class="padding-left"> Type </th>
      <td mat-cell *matCellDef="let row" [style]="getTypeColumnStyle(row)"> 
        <img *ngFor="let type of row.types" [src]="getTypeSrc(type)" [ngClass]="{'margin-left': row.types.length === 1}">
      </td>
    </ng-container>

    <ng-container matColumnDef="hp">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> HP </th>
      <td mat-cell *matCellDef="let row"> {{ row.hp }} </td>
    </ng-container>

    <ng-container matColumnDef="atk">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Atk </th>
      <td mat-cell *matCellDef="let row"> {{ row.atk }} </td>
    </ng-container>

    <ng-container matColumnDef="def">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Def </th>
      <td mat-cell *matCellDef="let row"> {{ row.def }} </td>
    </ng-container>

    <ng-container matColumnDef="spAtk">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> SpA </th>
      <td mat-cell *matCellDef="let row"> {{ row.spAtk }} </td>
    </ng-container>

    <ng-container matColumnDef="spDef">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> SpD </th>
      <td mat-cell *matCellDef="let row"> {{ row.spDef }} </td>
    </ng-container>

    <ng-container matColumnDef="speed">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Spd </th>
      <td mat-cell *matCellDef="let row"> {{ row.speed }} </td>
    </ng-container>

    <ng-container matColumnDef="total">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Total </th>
      <td mat-cell *matCellDef="let row"> {{ row.total }} </td>
    </ng-container>

    <ng-container matColumnDef="altTotal">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Alt Tot </th>
      <td mat-cell *matCellDef="let row"> {{ row.altTotal }} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    <!-- Row shown when there is no matching data. -->
    <tr class="mat-row" *matNoDataRow>
    <td class="mat-cell" colspan="4">No pokemon found</td>
    </tr>
  </table>

  <mat-paginator [pageSizeOptions]="[20, 50]" class="mat-elevation-z8"></mat-paginator>

</div>
